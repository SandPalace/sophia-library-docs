"use strict";(globalThis.webpackChunksophia_library_docs=globalThis.webpackChunksophia_library_docs||[]).push([[951],{6235:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"search/hybrid-search","title":"Hybrid Search (Recommended)","description":"Hybrid search combines semantic and keyword search using Reciprocal Rank Fusion (RRF) for the best of both worlds.","source":"@site/docs/search/hybrid-search.md","sourceDirName":"search","slug":"/search/hybrid-search","permalink":"/sophia-library-docs/docs/search/hybrid-search","draft":false,"unlisted":false,"editUrl":"https://github.com/SandPalace/sophia-library-docs/tree/main/docs/search/hybrid-search.md","tags":[],"version":"current","frontMatter":{"title":"Hybrid Search (Recommended)"},"sidebar":"tutorialSidebar","previous":{"title":"Keyword Search","permalink":"/sophia-library-docs/docs/search/keyword-search"},"next":{"title":"Sprints","permalink":"/sophia-library-docs/docs/category/sprints"}}');var i=n(4848),t=n(8453);const d={title:"Hybrid Search (Recommended)"},c="Hybrid Search \u2b50",l={},h=[{value:"When to Use",id:"when-to-use",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"API Endpoint",id:"api-endpoint",level:2},{value:"Example Request",id:"example-request",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Response Format",id:"response-format",level:2},{value:"Performance",id:"performance",level:2},{value:"Weight Tuning",id:"weight-tuning",level:2},{value:"Tips",id:"tips",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"hybrid-search-",children:"Hybrid Search \u2b50"})}),"\n",(0,i.jsx)(r.p,{children:"Hybrid search combines semantic and keyword search using Reciprocal Rank Fusion (RRF) for the best of both worlds."}),"\n",(0,i.jsx)(r.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Most use cases"})," - Hybrid is the recommended default"]}),"\n",(0,i.jsx)(r.li,{children:"Mixed queries (concepts + specific terms)"}),"\n",(0,i.jsx)(r.li,{children:"Comprehensive search results"}),"\n",(0,i.jsx)(r.li,{children:"Balancing precision and recall"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Parallel Search"}),": Runs semantic and keyword search simultaneously"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"RRF Fusion"}),": Combines rankings using Reciprocal Rank Fusion algorithm"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Weighted Scoring"}),": Applies configurable weights (default: 0.7 semantic, 0.3 keyword)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Deduplication"}),": Removes duplicate chunks"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Ranking"}),": Final results ranked by combined score"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"api-endpoint",children:"API Endpoint"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"POST /api/v1/search/hybrid"})}),"\n",(0,i.jsx)(r.h2,{id:"example-request",children:"Example Request"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'curl -X POST \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "query": "Einstein theory relativity",\n    "top_k": 10,\n    "semantic_weight": 0.7,\n    "keyword_weight": 0.3,\n    "filters": {\n      "field_tags": ["Philosophy", "Science"]\n    }\n  }\' \\\n  https://api.sophia-library.org/api/v1/search/hybrid\n'})}),"\n",(0,i.jsx)(r.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Parameter"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Required"}),(0,i.jsx)(r.th,{children:"Default"}),(0,i.jsx)(r.th,{children:"Description"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"query"})}),(0,i.jsx)(r.td,{children:"string"}),(0,i.jsx)(r.td,{children:"Yes"}),(0,i.jsx)(r.td,{children:"-"}),(0,i.jsx)(r.td,{children:"Search query text"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"top_k"})}),(0,i.jsx)(r.td,{children:"integer"}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:"10"}),(0,i.jsx)(r.td,{children:"Number of results (1-100)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"semantic_weight"})}),(0,i.jsx)(r.td,{children:"float"}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:"0.7"}),(0,i.jsx)(r.td,{children:"Weight for conceptual matching (0.0-1.0)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"keyword_weight"})}),(0,i.jsx)(r.td,{children:"float"}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:"0.3"}),(0,i.jsx)(r.td,{children:"Weight for exact matching (0.0-1.0)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"filters"})}),(0,i.jsx)(r.td,{children:"object"}),(0,i.jsx)(r.td,{children:"No"}),(0,i.jsx)(r.td,{children:"null"}),(0,i.jsx)(r.td,{children:"Filter by author, field_tags, or book_ids"})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"response-format",children:"Response Format"}),"\n",(0,i.jsx)(r.p,{children:"Includes score breakdown showing semantic and keyword contributions:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-json",children:'{\n  "search_metadata": {\n    "semantic_score": 0.7891,\n    "keyword_score": 14.2390,\n    "semantic_rank": 1,\n    "keyword_rank": 2,\n    "source_type": "both"\n  }\n}\n'})}),"\n",(0,i.jsxs)(r.p,{children:["See ",(0,i.jsx)(r.a,{href:"/docs/api-reference#search-response-format",children:"API Reference"})," for complete structure."]}),"\n",(0,i.jsx)(r.h2,{id:"performance",children:"Performance"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Average Query Time"}),": ~800ms"]}),"\n",(0,i.jsx)(r.li,{children:"Runs searches in parallel when possible"}),"\n",(0,i.jsx)(r.li,{children:"Automatic deduplication"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"weight-tuning",children:"Weight Tuning"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Query Type"}),(0,i.jsx)(r.th,{children:"Semantic Weight"}),(0,i.jsx)(r.th,{children:"Keyword Weight"}),(0,i.jsx)(r.th,{children:"Use Case"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Conceptual"}),(0,i.jsx)(r.td,{children:"0.9"}),(0,i.jsx)(r.td,{children:"0.1"}),(0,i.jsx)(r.td,{children:'"What is the meaning of virtue?"'})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Balanced"}),(0,i.jsx)(r.td,{children:"0.7"}),(0,i.jsx)(r.td,{children:"0.3"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Default - recommended"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Mixed"}),(0,i.jsx)(r.td,{children:"0.5"}),(0,i.jsx)(r.td,{children:"0.5"}),(0,i.jsx)(r.td,{children:'"Nietzsche\'s eternal recurrence"'})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Exact Terms"}),(0,i.jsx)(r.td,{children:"0.1"}),(0,i.jsx)(r.td,{children:"0.9"}),(0,i.jsx)(r.td,{children:'"categorical imperative kant"'})]})]})]}),"\n",(0,i.jsx)(r.h2,{id:"tips",children:"Tips"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Start with default weights (0.7/0.3)"}),"\n",(0,i.jsx)(r.li,{children:"Increase semantic weight for conceptual queries"}),"\n",(0,i.jsx)(r.li,{children:"Increase keyword weight for exact term queries"}),"\n",(0,i.jsx)(r.li,{children:"Results include score breakdown for analysis"}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["For more details, see ",(0,i.jsx)(r.a,{href:"/docs/sprints/sprint-10-hybrid-search-retriever",children:"Sprint 10: Hybrid Search"}),"."]})]})}function o(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>c});var s=n(6540);const i={},t=s.createContext(i);function d(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);