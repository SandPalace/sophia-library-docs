"use strict";(globalThis.webpackChunksophia_library_docs=globalThis.webpackChunksophia_library_docs||[]).push([[814],{1953:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"quick-start","title":"Sophia API - Quick Start Guide","description":"Get the Sophia Library API running in under 5 minutes.","source":"@site/docs/quick-start.md","sourceDirName":".","slug":"/quick-start","permalink":"/sophia-library-docs/docs/quick-start","draft":false,"unlisted":false,"editUrl":"https://github.com/SandPalace/sophia-library-docs/tree/main/docs/quick-start.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/sophia-library-docs/docs/intro"},"next":{"title":"API Reference","permalink":"/sophia-library-docs/docs/api-reference"}}');var s=r(4848),t=r(8453);const a={},l="Sophia API - Quick Start Guide",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Start Required Services",id:"start-required-services",level:2},{value:"1. Start Qdrant (Vector Database)",id:"1-start-qdrant-vector-database",level:3},{value:"2. Start OpenSearch (Search Engine)",id:"2-start-opensearch-search-engine",level:3},{value:"3. Start the API Server",id:"3-start-the-api-server",level:3},{value:"Generate an API Key",id:"generate-an-api-key",level:2},{value:"Test the API",id:"test-the-api",level:2},{value:"1. Health Check (No Auth Required)",id:"1-health-check-no-auth-required",level:3},{value:"2. Authenticated Requests",id:"2-authenticated-requests",level:3},{value:"3. Python Example",id:"3-python-example",level:3},{value:"Available Endpoints",id:"available-endpoints",level:2},{value:"Public (No Auth)",id:"public-no-auth",level:3},{value:"Catalog (Auth Required)",id:"catalog-auth-required",level:3},{value:"Authors (Auth Required)",id:"authors-auth-required",level:3},{value:"Search (Auth Required - <strong>NEW: Sprints 8-11</strong>)",id:"search-auth-required---new-sprints-8-11",level:3},{value:"Context Building (Auth Required)",id:"context-building-auth-required",level:3},{value:"Authentication (Varies)",id:"authentication-varies",level:3},{value:"Search Methods Explained",id:"search-methods-explained",level:2},{value:"Semantic Search (Sprint 8)",id:"semantic-search-sprint-8",level:3},{value:"Keyword Search (Sprint 9)",id:"keyword-search-sprint-9",level:3},{value:"Hybrid Search (Sprint 10) - <strong>RECOMMENDED</strong>",id:"hybrid-search-sprint-10---recommended",level:3},{value:"Standardized Response Format (Sprint 11)",id:"standardized-response-format-sprint-11",level:2},{value:"Filtering (Available with Qdrant Indexes)",id:"filtering-available-with-qdrant-indexes",level:2},{value:"Roles &amp; Permissions",id:"roles--permissions",level:2},{value:"read_only",id:"read_only",level:3},{value:"agent_service (Recommended for LangGraph)",id:"agent_service-recommended-for-langgraph",level:3},{value:"admin",id:"admin",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Server won&#39;t start",id:"server-wont-start",level:3},{value:"Database errors",id:"database-errors",level:3},{value:"Qdrant connection issues",id:"qdrant-connection-issues",level:3},{value:"OpenSearch connection issues",id:"opensearch-connection-issues",level:3},{value:"Authentication errors",id:"authentication-errors",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Current Status",id:"current-status",level:2},{value:"Resources",id:"resources",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"sophia-api---quick-start-guide",children:"Sophia API - Quick Start Guide"})}),"\n",(0,s.jsx)(n.p,{children:"Get the Sophia Library API running in under 5 minutes."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Python 3.11+"}),"\n",(0,s.jsx)(n.li,{children:"Virtual environment with dependencies installed"}),"\n",(0,s.jsx)(n.li,{children:"Sophia database (will be created if not exists)"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Qdrant"})," running on localhost:6333 (for semantic search)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OpenSearch"})," running on localhost:9200 (for keyword search)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"start-required-services",children:"Start Required Services"}),"\n",(0,s.jsx)(n.h3,{id:"1-start-qdrant-vector-database",children:"1. Start Qdrant (Vector Database)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Using Docker\ndocker run -p 6333:6333 -p 6334:6334 \\\n    -v $(pwd)/qdrant_storage:/qdrant/storage:z \\\n    qdrant/qdrant\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-start-opensearch-search-engine",children:"2. Start OpenSearch (Search Engine)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Using Docker Compose (recommended)\ncd /Users/enrique/Documents/sandpalace/apps/sophia\ndocker-compose up -d opensearch\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-start-the-api-server",children:"3. Start the API Server"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# From the sophia directory\ncd /Users/enrique/Documents/sandpalace/apps/sophia\n\n# Run the server\npython services/api/run_api_server.py\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Server Details:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["URL: ",(0,s.jsx)(n.a,{href:"http://localhost:8888",children:"http://localhost:8888"})]}),"\n",(0,s.jsxs)(n.li,{children:["API Docs: ",(0,s.jsx)(n.a,{href:"http://localhost:8888/api/v1/docs",children:"http://localhost:8888/api/v1/docs"})]}),"\n",(0,s.jsxs)(n.li,{children:["OpenAPI Spec: ",(0,s.jsx)(n.a,{href:"http://localhost:8888/api/v1/openapi.json",children:"http://localhost:8888/api/v1/openapi.json"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"generate-an-api-key",children:"Generate an API Key"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Create an admin API key\npython services/api/scripts/create_api_key.py \\\n  --name "My First Key" \\\n  --role admin\n\n# Create an agent service key\npython services/api/scripts/create_api_key.py \\\n  --name "LangGraph Agent" \\\n  --role agent_service \\\n  --quota 100000\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Save the API key"})," shown in the output - it won't be displayed again!"]}),"\n",(0,s.jsx)(n.h2,{id:"test-the-api",children:"Test the API"}),"\n",(0,s.jsx)(n.h3,{id:"1-health-check-no-auth-required",children:"1. Health Check (No Auth Required)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8888/api/v1/health\n"})}),"\n",(0,s.jsx)(n.p,{children:"Expected response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "healthy",\n  "service": "sophia-api",\n  "version": "v1",\n  "timestamp": 1699564800\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-authenticated-requests",children:"2. Authenticated Requests"}),"\n",(0,s.jsxs)(n.p,{children:["Replace ",(0,s.jsx)(n.code,{children:"YOUR_API_KEY"})," with your generated key:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# List books\ncurl -H "Authorization: Bearer YOUR_API_KEY" \\\n     http://localhost:8888/api/v1/catalog/books?limit=5\n\n# Semantic search (conceptual understanding)\ncurl -X POST \\\n     -H "Authorization: Bearer YOUR_API_KEY" \\\n     -H "Content-Type: application/json" \\\n     -d \'{"query": "What is virtue?", "top_k": 5, "score_threshold": 0.0}\' \\\n     http://localhost:8888/api/v1/search/semantic\n\n# Keyword search (exact term matching)\ncurl -X POST \\\n     -H "Authorization: Bearer YOUR_API_KEY" \\\n     -H "Content-Type: application/json" \\\n     -d \'{"query": "eternal recurrence", "top_k": 5}\' \\\n     http://localhost:8888/api/v1/search/keyword\n\n# Hybrid search (best of both worlds)\ncurl -X POST \\\n     -H "Authorization: Bearer YOUR_API_KEY" \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "query": "Nietzsche theory relativity",\n       "top_k": 10,\n       "semantic_weight": 0.7,\n       "keyword_weight": 0.3\n     }\' \\\n     http://localhost:8888/api/v1/search/hybrid\n\n# Build context for agents\ncurl -X POST \\\n     -H "Authorization: Bearer YOUR_API_KEY" \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n       "query": "Explain Plato\'\\\'\'s theory of forms",\n       "context_type": "field_expert",\n       "max_chunks": 10\n     }\' \\\n     http://localhost:8888/api/v1/context/build\n'})}),"\n",(0,s.jsx)(n.h3,{id:"3-python-example",children:"3. Python Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nAPI_URL = "http://localhost:8888/api/v1"\nAPI_KEY = "sk_YOUR_KEY_HERE"\n\nheaders = {\n    "Authorization": f"Bearer {API_KEY}",\n    "Content-Type": "application/json"\n}\n\n# List books\nresponse = requests.get(\n    f"{API_URL}/catalog/books",\n    headers=headers,\n    params={"limit": 5}\n)\nprint(response.json())\n\n# Hybrid search (combines semantic + keyword)\nresponse = requests.post(\n    f"{API_URL}/search/hybrid",\n    headers=headers,\n    json={\n        "query": "What is the nature of reality?",\n        "top_k": 10,\n        "semantic_weight": 0.7,  # Weight for conceptual understanding\n        "keyword_weight": 0.3    # Weight for exact term matching\n    }\n)\nresults = response.json()\n\n# Access standardized response format (Sprint 11)\nfor result in results["results"]:\n    print(f"Score: {result[\'score\']:.3f}")  # Normalized 0.0-1.0\n    print(f"Book: {result[\'book\'][\'title\']}")\n    print(f"Author: {result[\'author\'][\'name\']}")\n    print(f"Location: chunk {result[\'location\'][\'chunk_index\']}, "\n          f"pages {result[\'location\'][\'page_start\']}-{result[\'location\'][\'page_end\']}")\n    print(f"Text: {result[\'text\'][:200]}...")\n\n    # Score breakdown (for hybrid search)\n    if result[\'search_metadata\']:\n        print(f"  Semantic score: {result[\'search_metadata\'][\'semantic_score\']}")\n        print(f"  Keyword score: {result[\'search_metadata\'][\'keyword_score\']}")\n    print()\n\n# Query metadata\nprint(f"Query: {results[\'metadata\'][\'query\']}")\nprint(f"Search type: {results[\'metadata\'][\'search_type\']}")\nprint(f"Query time: {results[\'metadata\'][\'query_time_ms\']:.1f}ms")\nprint(f"Total results: {results[\'metadata\'][\'total_results\']}")\n'})}),"\n",(0,s.jsx)(n.h2,{id:"available-endpoints",children:"Available Endpoints"}),"\n",(0,s.jsx)(n.h3,{id:"public-no-auth",children:"Public (No Auth)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /"})," - API info"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/health"})," - Basic health check"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/health/detailed"})," - Detailed health"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/docs"})," - Swagger UI"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/redoc"})," - ReDoc"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"catalog-auth-required",children:"Catalog (Auth Required)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/catalog/books"})," - List books"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/catalog/books/{id}"})," - Get book details"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/catalog/books/{id}/sections"})," - Get sections"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"authors-auth-required",children:"Authors (Auth Required)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/authors"})," - List authors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/authors/{id}"})," - Get author details"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"search-auth-required---new-sprints-8-11",children:["Search (Auth Required - ",(0,s.jsx)(n.strong,{children:"NEW: Sprints 8-11"}),")"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /api/v1/search/semantic"})," - ",(0,s.jsx)(n.strong,{children:"Semantic search"})," (Qdrant + embeddings)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /api/v1/search/keyword"})," - ",(0,s.jsx)(n.strong,{children:"Keyword search"})," (OpenSearch + BM25)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /api/v1/search/hybrid"})," - ",(0,s.jsx)(n.strong,{children:"Hybrid search"})," (RRF fusion of both)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"All three methods return identical, standardized format (Sprint 11)"})}),"\n",(0,s.jsx)(n.h3,{id:"context-building-auth-required",children:"Context Building (Auth Required)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /api/v1/context/build"})," - Build agent context"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"authentication-varies",children:"Authentication (Varies)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /api/v1/auth/login"})," - Get JWT token"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /api/v1/auth/refresh"})," - Refresh token"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /api/v1/auth/api-keys"})," - Create API key (admin)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /api/v1/auth/api-keys"})," - List keys (admin)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DELETE /api/v1/auth/api-keys/{id}"})," - Revoke key (admin)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"search-methods-explained",children:"Search Methods Explained"}),"\n",(0,s.jsx)(n.h3,{id:"semantic-search-sprint-8",children:"Semantic Search (Sprint 8)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for"}),": Conceptual queries, questions, paraphrased concepts"]}),"\n",(0,s.jsx)(n.p,{children:"Uses OpenAI text-embedding-3-small (1536 dimensions) with Qdrant for vector similarity search."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Example: "What is the meaning of life?"\nresponse = requests.post(\n    f"{API_URL}/search/semantic",\n    headers=headers,\n    json={\n        "query": "How should we live?",\n        "top_k": 10,\n        "score_threshold": 0.0,  # 0.0-1.0 range\n        "filters": {\n            "author_slug": "plato"  # Optional filtering\n        }\n    }\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understands meaning and context"}),"\n",(0,s.jsx)(n.li,{children:"Finds conceptually similar content"}),"\n",(0,s.jsx)(n.li,{children:"Cosine similarity scoring (0.0-1.0)"}),"\n",(0,s.jsx)(n.li,{children:"Qdrant payload indexes for fast filtering"}),"\n",(0,s.jsx)(n.li,{children:"~600ms query time"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"keyword-search-sprint-9",children:"Keyword Search (Sprint 9)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for"}),": Exact term matching, specific phrases, author names"]}),"\n",(0,s.jsx)(n.p,{children:"Uses OpenSearch with BM25 algorithm for full-text keyword matching."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Example: "eternal recurrence"\nresponse = requests.post(\n    f"{API_URL}/search/keyword",\n    headers=headers,\n    json={\n        "query": "categorical imperative",\n        "top_k": 10,\n        "filters": {\n            "author_slug": "immanuel-kant"\n        }\n    }\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Exact keyword matching"}),"\n",(0,s.jsx)(n.li,{children:"BM25 scoring algorithm"}),"\n",(0,s.jsx)(n.li,{children:"Field boosting (title^2.0, author^1.5)"}),"\n",(0,s.jsx)(n.li,{children:"25,552 documents indexed"}),"\n",(0,s.jsx)(n.li,{children:"~100-200ms query time"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"hybrid-search-sprint-10---recommended",children:["Hybrid Search (Sprint 10) - ",(0,s.jsx)(n.strong,{children:"RECOMMENDED"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for"}),": Comprehensive results balancing meaning and exactness"]}),"\n",(0,s.jsx)(n.p,{children:"Combines semantic and keyword search using RRF (Reciprocal Rank Fusion)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Example: Balances conceptual understanding with exact terms\nresponse = requests.post(\n    f"{API_URL}/search/hybrid",\n    headers=headers,\n    json={\n        "query": "Einstein theory relativity",\n        "top_k": 10,\n        "semantic_weight": 0.7,   # Conceptual understanding\n        "keyword_weight": 0.3,    # Exact term matching\n        "filters": {\n            "field_tags": ["Philosophy", "Science"]\n        }\n    }\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Best of both worlds (semantic + keyword)"}),"\n",(0,s.jsx)(n.li,{children:"RRF fusion algorithm (k=60)"}),"\n",(0,s.jsx)(n.li,{children:"Configurable weights"}),"\n",(0,s.jsx)(n.li,{children:"Score breakdown in response"}),"\n",(0,s.jsx)(n.li,{children:"~800ms query time"}),"\n",(0,s.jsx)(n.li,{children:"Automatic deduplication"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"standardized-response-format-sprint-11",children:"Standardized Response Format (Sprint 11)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"All three search methods return identical structure:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "chunk_id": "7e8eec35-2b21-53a8-b62f-5437044e8bd0",\n      "score": 0.8542,  // Normalized 0.0-1.0\n      "text": "The matched text content...",\n\n      "book": {\n        "id": "3871b915ccc13144e3124b142c66d23b",\n        "slug": "relativity-special-general-theory",\n        "title": "Relativity: The Special and General Theory"\n      },\n\n      "author": {\n        "id": "einstein-123",\n        "name": "Albert Einstein",\n        "slug": "albert-einstein"\n      },\n\n      "location": {\n        "chunk_index": 0,\n        "page_start": 1,\n        "page_end": 3,\n        "section_id": null,\n        "section_title": null\n      },\n\n      "search_metadata": {\n        "semantic_score": 0.5029,     // Raw semantic score\n        "keyword_score": 15.2390,     // Raw keyword score\n        "semantic_rank": 1,           // Rank in semantic results\n        "keyword_rank": 1,            // Rank in keyword results\n        "highlights": null,           // Reserved for future\n        "source_type": "both"         // "semantic", "keyword", or "both"\n      }\n    }\n  ],\n\n  "metadata": {\n    "query": "theory of relativity",\n    "search_type": "hybrid",\n    "total_results": 10,\n    "returned_results": 10,\n    "query_time_ms": 842.5,\n    "semantic_weight": 0.7,           // Hybrid only\n    "keyword_weight": 0.3,            // Hybrid only\n    "filters": null\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Single parser for all search types"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Nested objects for clean structure"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Normalized scores (comparable across methods)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Score breakdown for hybrid"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Query metadata envelope"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"filtering-available-with-qdrant-indexes",children:"Filtering (Available with Qdrant Indexes)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Filter by author:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "query": "virtue ethics",\n  "filters": {\n    "author_slug": "aristotle"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Filter by field tags:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "query": "quantum mechanics",\n  "filters": {\n    "field_tags": ["Philosophy", "Science"]\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Filter by book IDs:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "query": "categorical imperative",\n  "filters": {\n    "book_ids": ["book-id-1", "book-id-2"]\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Qdrant Payload Indexes (for fast filtering):"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"author"})," - Author name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"content_id"})," - Book ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"domain"})," - Academic domain"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"discipline"})," - Academic discipline"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"subfield"})," - Academic subfield"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"roles--permissions",children:"Roles & Permissions"}),"\n",(0,s.jsx)(n.h3,{id:"read_only",children:"read_only"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Can read catalog and author information"}),"\n",(0,s.jsx)(n.li,{children:"Can perform semantic and keyword searches"}),"\n",(0,s.jsx)(n.li,{children:"Limited access"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"agent_service-recommended-for-langgraph",children:"agent_service (Recommended for LangGraph)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All read_only permissions"}),"\n",(0,s.jsx)(n.li,{children:"Can perform hybrid searches"}),"\n",(0,s.jsx)(n.li,{children:"Can build contexts for agents"}),"\n",(0,s.jsx)(n.li,{children:"Suitable for production AI agents"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"admin",children:"admin"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All permissions"}),"\n",(0,s.jsx)(n.li,{children:"Can create/manage API keys"}),"\n",(0,s.jsx)(n.li,{children:"Can view metrics"}),"\n",(0,s.jsx)(n.li,{children:"Full system access"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Optional: Create a ",(0,s.jsx)(n.code,{children:".env"})," file to customize settings:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# API Configuration\nAPI_HOST=0.0.0.0\nAPI_PORT=8888\nAPI_WORKERS=4\n\n# Database\nDB_PATH=database/sophia.db\n\n# Qdrant Configuration\nQDRANT_HOST=localhost\nQDRANT_PORT=6333\nQDRANT_COLLECTION=sophia_library\n\n# OpenSearch Configuration\nOPENSEARCH_HOST=localhost\nOPENSEARCH_PORT=9200\nOPENSEARCH_SCHEME=http\nOPENSEARCH_USER=admin\nOPENSEARCH_PASSWORD=your_password\n\n# Security\nJWT_SECRET_KEY=your-secret-key-here\nCORS_ORIGINS=http://localhost:3000,http://localhost:8888\n\n# Rate Limiting\nRATE_LIMIT_PER_HOUR=1000\nRATE_LIMIT_PER_MINUTE=100\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"server-wont-start",children:"Server won't start"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check if port 8888 is in use\nlsof -i :8888\n\n# Kill process if needed\nkill -9 <PID>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"database-errors",children:"Database errors"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Run migrations\npython services/api/migrations/run_migrations.py\n\n# Check database exists\nls -la database/sophia.db\n"})}),"\n",(0,s.jsx)(n.h3,{id:"qdrant-connection-issues",children:"Qdrant connection issues"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check Qdrant is running\ncurl http://localhost:6333/collections\n\n# Check collection exists\ncurl http://localhost:6333/collections/sophia_library\n\n# Verify documents indexed\npython -c \"\nfrom services.qdrant import QdrantService\nqs = QdrantService()\ninfo = qs.client.get_collection('sophia_library')\nprint(f'Vectors: {info.points_count}')\nprint(f'Indexes: {info.payload_schema}')\n\"\n"})}),"\n",(0,s.jsx)(n.h3,{id:"opensearch-connection-issues",children:"OpenSearch connection issues"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Check OpenSearch is running\npython scripts/check_opensearch_connection.py\n\n# Verify index exists\ncurl -X GET "localhost:9200/sophia_library/_count"\n\n# Check cluster health\ncurl -X GET "localhost:9200/_cluster/health"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"authentication-errors",children:"Authentication errors"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Verify API key format (should start with "sk_")\necho $API_KEY\n\n# List all API keys\nsqlite3 database/sophia.db "SELECT id, name, role, revoked FROM api_keys;"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Explore the API"}),": Visit ",(0,s.jsx)(n.a,{href:"http://localhost:8888/api/v1/docs",children:"http://localhost:8888/api/v1/docs"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Read Integration Guide"}),": See ",(0,s.jsx)(n.a,{href:"./LANGGRAPH_INTEGRATION_GUIDE.md",children:"LANGGRAPH_INTEGRATION_GUIDE.md"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Try Different Search Methods"}),": Semantic, keyword, and hybrid"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Build Your Agent"}),": Use the Python client example"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Monitor Usage"}),": Check the ",(0,s.jsx)(n.code,{children:"api_usage"})," table in the database"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"current-status",children:"Current Status"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Search Implementation (Sprints 8-11): \u2705 COMPLETED"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Sprint 8: Semantic Search (Qdrant + embeddings)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Sprint 9: Keyword Search (OpenSearch + BM25)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Sprint 10: Hybrid Search (RRF fusion)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Sprint 11: Result Formatting (standardized responses)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"System Capabilities:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"25,552 documents indexed in both Qdrant and OpenSearch"}),"\n",(0,s.jsx)(n.li,{children:"Payload indexes for fast filtering"}),"\n",(0,s.jsx)(n.li,{children:"All three search methods operational"}),"\n",(0,s.jsx)(n.li,{children:"Standardized API responses"}),"\n",(0,s.jsx)(n.li,{children:"Production ready"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Sprint 6 Progress:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Phase 1: API Foundation (COMPLETED)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Phase 2: Core Endpoints (COMPLETED)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Phase 3: Authentication & Security (COMPLETED)"}),"\n",(0,s.jsx)(n.li,{children:"\u23f8\ufe0f Phase 4: Rate Limiting & Monitoring (PENDING)"}),"\n",(0,s.jsx)(n.li,{children:"\u23f8\ufe0f Phase 5: Performance Optimization (PENDING)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Phase 6: Documentation & Testing (COMPLETED)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The API is ",(0,s.jsx)(n.strong,{children:"production-ready"})," with full search capabilities!"]}),"\n",(0,s.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Full Documentation"}),": ",(0,s.jsx)(n.a,{href:"../services/api/README.md",children:"services/api/README.md"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LangGraph Integration"}),": ",(0,s.jsx)(n.a,{href:"./LANGGRAPH_INTEGRATION_GUIDE.md",children:"LANGGRAPH_INTEGRATION_GUIDE.md"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search Result Format"}),": ",(0,s.jsx)(n.a,{href:"./SEARCH_RESULT_FORMAT_SUMMARY.md",children:"SEARCH_RESULT_FORMAT_SUMMARY.md"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sprint Plans"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./sprints/sprint-6-api-layer.md",children:"Sprint 6: API Layer"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/sophia-library-docs/docs/sprints/sprint-8-qdrant-semantic-search",children:"Sprint 8: Semantic Search"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/sophia-library-docs/docs/sprints/sprint-9-opensearch-keyword-search",children:"Sprint 9: Keyword Search"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/sophia-library-docs/docs/sprints/sprint-10-hybrid-search-retriever",children:"Sprint 10: Hybrid Search"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/sophia-library-docs/docs/sprints/sprint-11-search-result-formatting",children:"Sprint 11: Result Formatting"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API Architecture"}),": ",(0,s.jsx)(n.a,{href:"./SERVICE_ARCHITECTURE.md",children:"SERVICE_ARCHITECTURE.md"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var i=r(6540);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);